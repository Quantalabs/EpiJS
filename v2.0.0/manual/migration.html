<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>EpiJS Migration Gide | EpiJS</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="shortcut icon" href="https://i.ibb.co/HKt7Bn3/Logo-Makr-4sk-LGO.png">
    <meta name="description" content="A disease modeling package for JS.">
    
    <link rel="preload" href="/v2.0.0/assets/css/0.styles.a131a482.css" as="style"><link rel="preload" href="/v2.0.0/assets/js/app.1916e8be.js" as="script"><link rel="preload" href="/v2.0.0/assets/js/2.a292e205.js" as="script"><link rel="preload" href="/v2.0.0/assets/js/13.c11a0cc5.js" as="script"><link rel="prefetch" href="/v2.0.0/assets/js/10.5b57087d.js"><link rel="prefetch" href="/v2.0.0/assets/js/11.9bdd82fe.js"><link rel="prefetch" href="/v2.0.0/assets/js/12.4e2bee2e.js"><link rel="prefetch" href="/v2.0.0/assets/js/14.40270c7d.js"><link rel="prefetch" href="/v2.0.0/assets/js/15.780f3f9c.js"><link rel="prefetch" href="/v2.0.0/assets/js/16.d1ece9ab.js"><link rel="prefetch" href="/v2.0.0/assets/js/17.183eb4a3.js"><link rel="prefetch" href="/v2.0.0/assets/js/3.e37b1259.js"><link rel="prefetch" href="/v2.0.0/assets/js/4.94255d11.js"><link rel="prefetch" href="/v2.0.0/assets/js/5.446b9562.js"><link rel="prefetch" href="/v2.0.0/assets/js/6.019abc30.js"><link rel="prefetch" href="/v2.0.0/assets/js/7.8177e8a1.js"><link rel="prefetch" href="/v2.0.0/assets/js/8.1d79322a.js"><link rel="prefetch" href="/v2.0.0/assets/js/9.f80a6182.js">
    <link rel="stylesheet" href="/v2.0.0/assets/css/0.styles.a131a482.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/v2.0.0/" class="home-link router-link-active"><!----> <span class="site-name">EpiJS</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/v2.0.0/getting-started.html" class="nav-link">
  Documentation
</a></div><div class="nav-item"><a href="https://epi.js.org/demo/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/Quantalabs/EpiJS" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/v2.0.0/getting-started.html" class="nav-link">
  Documentation
</a></div><div class="nav-item"><a href="https://epi.js.org/demo/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/Quantalabs/EpiJS" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Introduction</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Module Docs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>The EpiJS Manual</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v2.0.0/manual/SIR.html" class="sidebar-link">SIR Models</a></li><li><a href="/v2.0.0/manual/migration.html" aria-current="page" class="active sidebar-link">Migration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v2.0.0/manual/migration.html#new-features-in-v2" class="sidebar-link">New Features in v2</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="migration-from-v1-to-v2"><a href="#migration-from-v1-to-v2" class="header-anchor">#</a> Migration from v1 to v2</h1> <p>A lot of things have changed from v1 to v2. First and foremost, we have officially dropped support for NodeJS 10, <a href="https://github.com/Quantalabs/EpiJS/pull/54" target="_blank" rel="noopener noreferrer">along with MathJS dropping support<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. This shouldn't change much as NodeJS 10.x was <a href="https://endoflife.date/nodejs" target="_blank" rel="noopener noreferrer">already end-of-lifed<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, so we highly suggest upgrading your NodeJS version to the latest version or a LTS release.</p> <p>Next, the big deprecation. This release now removes built-in plotting from the <code>pre</code> module, and moved it to the brand-new <code>plots</code> module. Why? Currently, the only way to interact with the data is through the chart, but other things you might want to do with the data, whatever they might be, most likely can't be done. So, we've changed the output to this format:</p> <div class="language-JSON extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    label<span class="token operator">:</span> '<span class="token punctuation">[</span>COMPARTMENT NAME<span class="token punctuation">]</span>'
    data<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> ...<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Note that this is repeated for each compartment in a list, so to access a compartment, use the number corresponding to the value in the name of the model, for example, <code>data[0]</code> would access the susceptible compartment in any model for the <code>pre</code> compartment, as it comes first in all the SIR-based models. <code>data[1]</code> might access an infected compartment or exposed compartment, based on the model, and so on.</p> <p>However the syntax has also changed. Before it was:</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token keyword">function</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>parameters<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>Take for example the SIR model:</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token function">sir</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9999</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span>
</code></pre></div><p>This creates a graph on the canvas for a model of an infection which has an r-naught of 4, susceptble population of 9999, infected population of 1, recovery rate of 1/21, and a total population of 10000, which it plots for 100 days. However, now, it changed to this:</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> ourmodel <span class="token operator">=</span> <span class="token function">sir</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9999</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token function">plot</span><span class="token punctuation">(</span>ourmodel<span class="token punctuation">,</span> <span class="token string">'canvas'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
</code></pre></div><p>We obviously removed the canvas parameter, as we no longer plot with the pre model, and added the <code>plot</code> function from the <code>plots</code> module to plot it to the canvas. Let's start with that, however. First, we select the model, <code>ourmodel</code>, and then select the canvas, and then we add this new parameter, 100, which selects the amount of days to plot for, which allows us to plot 50 days, or even 1 day, but, for this case, we plot it for 100. As for the new parameter in the <code>sir</code> function, is a new feature we added. Stochastic modelling. This allows for more accurate modelling of models, and we set it to true to make sure we model stochastically. Stochastic modelling also allows for extinctions, so when the infected population is very low, the disease might go extinct, as there is a probability they won't spread it to the people needed to keep the disease alive. Stochastic models then also give you different outputs each time, to better model an outbreak. You can still set this to false if you'd like to still have the same graph as before.</p> <p>Another important aspect is that this variable was added to the majority of functions/classes. Your Idiom class can now be stochastic if you add a <code>w</code> to the equation, which EpiJS will auto-generate each run as a random number from the gaussian distribution. In the <code>com</code> module, when running a function on a class, there's the new parameter <code>stochastic</code>, which is like the other parameter in <code>pre</code>, it's a boolean which defines whether the model is stochastic or not.</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> outbreak <span class="token operator">=</span> com<span class="token punctuation">.</span><span class="token function">sir</span><span class="token punctuation">(</span>virus<span class="token punctuation">,</span> time<span class="token punctuation">)</span>
</code></pre></div><p>Is now:</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> oubreak <span class="token operator">=</span> com<span class="token punctuation">.</span><span class="token function">sir</span><span class="token punctuation">(</span>virus<span class="token punctuation">,</span> time<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// Makes a stochastic sir model.</span>
</code></pre></div><p>On the topic of the com module, the <code>h</code> parameter is now gone on creating viruses, as there was never a pre-built <code>seihrd</code> model, or any model which used a hospitalized compartment.</p> <p>So, then why should you switch? You're doing fine right now! Well, not only is v2 a LTS release, meaning we'll support it for a long time (we're thinking around 2 major releases, if we even get that far!), but the release is introducing tons of new features!</p> <h2 id="new-features-in-v2"><a href="#new-features-in-v2" class="header-anchor">#</a> New Features in <code>v2</code></h2> <ul><li>Stochastic modelling,</li> <li>Custom models in <code>com</code> module,</li> <li>New pre-built compartments for you to use in <code>comp</code>, including:
<ul><li>Susceptible,</li> <li>Exposed,</li> <li>Infected,</li> <li>Hospitalized,</li> <li>Critical,</li> <li>Recovered,</li> <li>Dead,</li> <li>and Vaccinated compartments,</li></ul></li> <li>A new utils compartment, which has epidemiological related utilities,</li> <li>Bug fixes,</li> <li>Customizable plotting,</li> <li>Allows for more interaction with data from <code>pre</code> module,</li> <li>metadata on the web, through <code>EpiJS.about</code>, <code>EpiJS.version</code>, etc.</li></ul> <p>and there's more coming in the new releases! You can just look at the <a href="https://github.com/Quantalabs/EpiJS/projects/1" target="_blank" rel="noopener noreferrer">features project board<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to get a preview at what's ahead!</p> <p>Additionally, you can access all the functions via:</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code>EpiJS<span class="token punctuation">.</span><span class="token punctuation">[</span>module<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token keyword">function</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>like:</p> <div class="language- extra-class"><pre class="language-text"><code>EpiJS.pre.sir()
</code></pre></div><p>why you would want to do that when you can just do <code>sir()</code> is beyond me, but, it's an option!</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/v2.0.0/manual/SIR.html" class="prev">
        SIR Models
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/v2.0.0/assets/js/app.1916e8be.js" defer></script><script src="/v2.0.0/assets/js/2.a292e205.js" defer></script><script src="/v2.0.0/assets/js/13.c11a0cc5.js" defer></script>
  </body>
</html>
